# =======================================================
# KODEMIA BACKEND - Configuration Locale (.env.local)
# =======================================================
# Fichier de configuration pour le développement local
# REMARQUE: Ne pas commiter ce fichier contenant vos clés secrètes!
# =======================================================

# ============= SERVEUR =============
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:5173

# ============= SUPABASE (PostgreSQL) =============
# Chaîne de connexion PostgreSQL Supabase
# Format: postgresql://postgres:[PASSWORD]@db.clvyuxkmcrgqkybnumko.supabase.co:5432/postgres
# Remplacez [PASSWORD] par votre mot de passe PostgreSQL
DATABASE_URL="postgresql://postgres:YOUR_SUPABASE_PASSWORD_HERE@db.clvyuxkmcrgqkybnumko.supabase.co:5432/postgres"

# ============= JWT AUTHENTIFICATION =============
# Générer avec: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="your_jwt_secret_key_super_long_and_random_here_32_bytes_minimum"
JWT_EXPIRATION=7d

# ============= STRIPE (Paiements) =============
# Développement (Mode Test)
# Publishable Key de https://dashboard.stripe.com/apikeys
STRIPE_PUBLISHABLE_KEY="pk_test_YOUR_PUBLISHABLE_KEY_HERE"

# Secret Key de https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_YOUR_SECRET_KEY_HERE"

# Webhook Secret de https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET="whsec_6zr1mwH59k4577DTVMfxefSDFER5To8d"
# ============= SUPABASE API (Optionnel) =============
# Project URL
SUPABASE_URL="https://clvyuxkmcrgqkybnumko.supabase.co"

# Publishable API Key
SUPABASE_ANON_KEY="sb_publishable_E_pLUPnKrRXUvhAYTA5U-w_SdDWFWMp"

# =======================================================
# INSTRUCTIONS POUR COMPLÉTER CE FICHIER
# =======================================================
#
# 1. DATABASE_URL (Supabase)
#    - Allez sur: https://supabase.com/dashboard/project/clvyuxkmcrgqkybnumko
#    - Cliquez "Connect" en haut à droite
#    - Sélectionnez "Connection String" > "Direct connection"
#    - Copier la chaîne avec le format:
#      postgresql://postgres:[PASSWORD]@db.clvyuxkmcrgqkybnumko.supabase.co:5432/postgres
#    - Remplacer [PASSWORD] par votre mot de passe Supabase
#
# 2. Stripe Keys
#    - Allez sur: https://dashboard.stripe.com/apikeys
#    - Copiez "Publishable Key" (pk_test_...)
#    - Copiez "Secret Key" (sk_test_...)
#    - Collez-les dans les variables STRIPE_PUBLISHABLE_KEY et STRIPE_SECRET_KEY
#
# 3. Stripe Webhook Secret
#    - Allez sur: https://dashboard.stripe.com/webhooks
#    - Créez un nouvel endpoint:
#      URL: https://votre-backend.com/api/webhooks/stripe
#      Événements: "payment_intent.succeeded"
#    - Copiez le "Signing Secret" (whsec_...)
#    - Collez-le dans STRIPE_WEBHOOK_SECRET
#
# 4. JWT Secret
#    - Générez une clé aléatoire sécurisée avec le terminal:
#      node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#    - Collez le résultat dans JWT_SECRET
#
# =======================================================
# SÉCURITÉ
# =======================================================
# - Ne JAMAIS commiter ce fichier .env.local dans Git
# - Ne JAMAIS partager vos clés secrètes
# - Ne JAMAIS utiliser ces clés de test en production
# - En production, utilisez sk_live_ et pk_live_ de Stripe
# =======================================================
