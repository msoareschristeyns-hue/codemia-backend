# Kodemia Backend - Fichier de Configuration des Variables d'Environnement
# Créez un fichier ".env" en copiant ce fichier et remplissez les valeurs

# =========================================
# 1. CONFIGURATION SERVEUR
# =========================================

# Mode d'environnement
NODE_ENV=development

# Port du serveur
PORT=3000

# URL du frontend pour les requêtes CORS
FRONTEND_URL=http://localhost:5173

# =========================================
# 2. BASE DE DONNÉES POSTGRESQL (SUPABASE)
# =========================================
# Obtenir cette valeur depuis:
# 1. Allez sur https://supabase.com/dashboard/project/clvyuxkmcrgqkybnumko
# 2. Cliquez sur "Connect" > "Connection String" > "psycopg2" ou "Node.js"
# 3. Copier la chaîne de connexion complète
# Format: postgresql://postgres:[PASSWORD]@[HOST]:[PORT]/postgres

DATABASE_URL="postgresql://postgres:[YOUR_PASSWORD]@[YOUR_HOST].supabase.co:5432/postgres"

# =========================================
# 3. AUTHENTIFICATION JWT
# =========================================
# Générer une clé secrète sécurisée avec:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

JWT_SECRET="votre_clé_secrète_jwt_super_longue_et_sécurisée_ici"
JWT_EXPIRATION="7d"

# =========================================
# 4. INTÉGRATION STRIPE (Paiements)
# =========================================
# Obtenir ces clés depuis https://dashboard.stripe.com/apikeys
# 1. Visitez https://dashboard.stripe.com/apikeys
# 2. Recherchez la section "API keys"
# 3. Copiez la "Secret key" (commence par sk_test_ ou sk_live_)
# 4. Copiez la "Publishable key" (commence par pk_test_ ou pk_live_)

# Clé secrète Stripe (NE JAMAIS PARTAGER PUBLIQUEMENT)
STRIPE_SECRET_KEY="sk_test_YOUR_SECRET_KEY_HERE"

# Clé publique Stripe (peut être partagée)
STRIPE_PUBLISHABLE_KEY="pk_test_YOUR_PUBLISHABLE_KEY_HERE"

# Secret webhook Stripe
# Obtenir depuis: https://dashboard.stripe.com/webhooks
# 1. Créez un webhook endpoint pointant vers votre backend
# 2. Sélectionnez l'événement "payment_intent.succeeded"
# 3. Copiez le "Signing secret"
STRIPE_WEBHOOK_SECRET="whsec_YOUR_WEBHOOK_SECRET_HERE"

# =========================================
# 5. SUPABASE API (OPTIONNEL - pour Supabase client)
# =========================================
# Project URL: https://supabase.com/dashboard/project/clvyuxkmcrgqkybnumko
# Settings > API

SUPABASE_URL="https://clvyuxkmcrgqkybnumko.supabase.co"
SUPABASE_ANON_KEY="sb_publishable_E_pLUPnKrRXUvhAYTA5U-w_SdDWFWMp"

# =========================================
# INSTRUCTIONS DE CONFIGURATION
# =========================================
#
# ÉTAPE 1: Configuration Supabase
# ================================
# 1. Allez sur https://supabase.com/dashboard/project/clvyuxkmcrgqkybnumko
# 2. Cliquez sur "Connect" en haut à droite
# 3. Sélectionnez "Node.js" ou "psycopg2"
# 4. Copiez la chaîne de connexion complète
# 5. Remplacez [YOUR_PASSWORD] par le mot de passe de votre base de données
# 6. Collez la valeur complète dans DATABASE_URL ci-dessus
#
# Ou utilisez la chaîne de connexion standard:
# postgresql://postgres:PASSWORD@clvyuxkmcrgqkybnumko.supabase.co:5432/postgres
#
# ÉTAPE 2: Configuration Stripe
# =============================
# 1. Visitez https://dashboard.stripe.com/apikeys
# 2. Vous verrez deux clés:
#    - Publishable key: Commencera par pk_test_ (mode test) ou pk_live_ (production)
#    - Secret key: Commencera par sk_test_ (mode test) ou sk_live_ (production)
# 3. Copiez les deux clés et collez-les dans les variables ci-dessus
#
# 4. Pour le webhook secret:
#    - Allez sur https://dashboard.stripe.com/webhooks
#    - Cliquez sur "Add endpoint"
#    - URL: https://votre-backend.com/api/webhooks/stripe
#    - Événements à sélectionner: "payment_intent.succeeded"
#    - Une fois créé, copiez le "Signing secret" (commence par whsec_)
#
# ÉTAPE 3: Lancer le backend
# ===========================
# npm install
# npx prisma generate
# npx prisma migrate dev --name init
# npm run dev
#
# =========================================
# NOTES DE SÉCURITÉ
# =========================================
# - Ne JAMAIS commiter ce fichier .env dans Git
# - Gardez toutes les clés secrètes confidentielles
# - En production, utilisez des variables d'environnement du serveur
# - Utilisez sk_live_ et pk_live_ uniquement en production
# =========================================
